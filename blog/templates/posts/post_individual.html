{% extends 'base.html'%}
{% load static %}

{% block titulo %} Noticia completa {% endblock %}

{% block contenido %}
<br>

<a href="{% url 'apps.posts:modificar_post' posts.pk %}" class="btn btn-dark btn-sm rounded-pill">Modificar post</a>

<h1>{{noticia}}</h1>
<img class="img-detalle" src="{{  posts.imagen.url  }}" style="height: 200px;">
<p>{{posts.texto}}</p>
<p>Fecha: {{posts.fecha}}</p>
<p>Categoria: {{posts.categoria}}</p>

<p><img width="20px"
        src="https://th.bing.com/th/id/R.0ababdb27dd0bb71f21f03c98b6cd6f1?rik=%2fiVDxahrgNztPA&pid=ImgRaw&r=0" alt="">
    {{posts.autor}}</p>

    <!-- Agregamos comentarios!!! -->
    
        <div class="container-fluid" style="margin-bottom: 20px;">
            <h4>Comentarios</h4>
            <div class="container-fluid" style="margin-bottom: 20px;">
                {% for comentario in comentarios %}
                <table class="list-unstyled d-flex justify-content-between mb-0">
                    <tr><td>{{ comentario.usuario }} {{ comentario.fecha }}</td></tr>
                    <p>{{ comentario.texto }}</p>
                </table>
                {% empty %}
                <p>No hay comentarios. Puedes ser el primero en comentar!</p>
                {% endfor %}
            </div>
        </div>
        
        <div id="comentario" class="container-fluid" style="margin-bottom: 100px; margin-top: 100px;">
            <form method="POST">
                {% csrf_token %}
                {% if user.is_authenticated %}
                <h2>Deja tu comentario</h2>
                {{ form.as_p }}
                <input type="submit" value="Comentar">
                {% else %}
                <h2>Debes iniciar sesión o registrarte para comentar</h2>
                <a class="btn btn-success btn-lg" href="{% url 'login' %}?next={{ request.path }}#comentario">Iniciar   
         sesión</a>
                <input type="hidden" name="next" value="{{ request.path }}">
                {% endif %}
            </form>
        
        </div>
    
    
{% endblock contenido %}